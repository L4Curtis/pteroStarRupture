{
  "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PANEL",
  "meta": {
    "version": "PLCN_v1",
    "update_url": null
  },
  "exported_at": "2026-01-13T01:10:00+01:00",
  "name": "StarRupture Dedicated Server",
  "author": "curtis@local.domain",
  "uuid": "b4d6f3a2-1f7a-4c7a-9c9a-9f3c8c2c7a11",
  "description": "StarRupture Dedicated Server installed via SteamCMD (AppID 3809400) using anonymous login. Windows server runs under Wine. Fully compatible with Pelican using /mnt/server persistence.",
  "features": [
    "steam_disk_space"
  ],
  "docker_images": {
    "Wine + SteamCMD": "ghcr.io/parkervcp/yolks:wine_staging"
  },
  "file_denylist": [],
  "startup": "bash -lc 'set -e\ncd /mnt/server || { echo \"[SR] ERROR: /mnt/server not mounted\"; exit 1; }\n\nexport HOME=/mnt/server\nexport WINEPREFIX=/mnt/server/.wine\nexport WINEDEBUG=-all\nmkdir -p \"$WINEPREFIX\"\n\nif [ ! -f \"$WINEPREFIX/.init_done\" ]; then\n  echo \"[SR] Initializing Wine\"\n  wineboot -u || true\n  touch \"$WINEPREFIX/.init_done\"\nfi\n\nSERVER_EXE=\"./StarRuptureServerEOS.exe\"\nif [ ! -f \"$SERVER_EXE\" ]; then\n  SERVER_EXE=\"$(find . -maxdepth 6 -type f -iname \"StarRuptureServerEOS.exe\" | head -n 1)\"\nfi\n\nif [ -z \"$SERVER_EXE\" ] || [ ! -f \"$SERVER_EXE\" ]; then\n  echo \"[SR] ERROR: StarRuptureServerEOS.exe not found\"\n  ls -la\n  exit 1\nfi\n\nARGS=\"-Log -Port=${SERVER_PORT} -QueryPort=${QUERY_PORT} -ServerName=\\\"${SERVER_NAME}\\\"\"\n[ -n \"${MULTIHOME:-}\" ] && ARGS=\"$ARGS -MULTIHOME=${MULTIHOME}\"\n[ -n \"${MAX_PLAYERS:-}\" ] && ARGS=\"$ARGS -MaxPlayers=${MAX_PLAYERS}\"\n[ -n \"${EXTRA_ARGS:-}\" ] && ARGS=\"$ARGS ${EXTRA_ARGS}\"\n\necho \"[SR] Starting: $SERVER_EXE $ARGS\"\nexec wine \"$SERVER_EXE\" $ARGS'",
  "config": {
    "files": "{}",
    "startup": "{ \"done\": \"[SR] Starting:\" }",
    "logs": "{}",
    "stop": "^C"
  },
  "scripts": {
    "installation": {
      "script": "#!/bin/bash\nset -euo pipefail\n\nAPPID=3809400\nINSTALL_DIR=/mnt/server\n\numask 0002\n\nmkdir -p \"${INSTALL_DIR}\" \"${INSTALL_DIR}/steamcmd\" \"${INSTALL_DIR}/steamapps\" \"${INSTALL_DIR}/Steam\"\nchmod -R 775 \"${INSTALL_DIR}\" || true\n\ncd \"${INSTALL_DIR}/steamcmd\"\n\nrm -rf ./* || true\ncurl -sSL -o steamcmd_linux.tar.gz https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz\ntar -xzf steamcmd_linux.tar.gz\n\nexport HOME=\"${INSTALL_DIR}\"\n\necho \"[SR] Installing StarRupture (AppID ${APPID})\"\n./steamcmd.sh \\\n  +@ShutdownOnFailedCommand 1 \\\n  +@NoPromptForPassword 1 \\\n  +@sSteamCmdForcePlatformType windows \\\n  +@sSteamCmdForcePlatformBitness 64 \\\n  +force_install_dir \"${INSTALL_DIR}\" \\\n  +login anonymous \\\n  +app_info_update 1 \\\n  +app_update ${APPID} validate \\\n  +quit\n\nif [ ! -f \"${INSTALL_DIR}/StarRuptureServerEOS.exe\" ]; then\n  echo \"[SR] ERROR: Installation finished but server binary not found\"\n  find \"${INSTALL_DIR}\" -maxdepth 6 -type f -iname \"*StarRupture*exe\" | head -n 200 || true\n  exit 1\nfi\n\necho \"[SR] Installation complete.\"",
      "container": "ghcr.io/parkervcp/installers:debian",
      "entrypoint": "bash"
    }
  },
  "variables": [
    {
      "name": "Server Name",
      "description": "Name of the server shown in-game.",
      "env_variable": "SERVER_NAME",
      "default_value": "My StarRupture Server",
      "user_viewable": true,
      "user_editable": true,
      "rules": ["required", "string", "max:128"],
      "sort": 1
    },
    {
      "name": "Query Port",
      "description": "Steam query port (UDP). Must be allocated in Pelican.",
      "env_variable": "QUERY_PORT",
      "default_value": "27015",
      "user_viewable": true,
      "user_editable": true,
      "rules": ["required", "integer", "min:1025", "max:65535"],
      "sort": 2
    },
    {
      "name": "MultiHome IP",
      "description": "Optional IP to bind the server to.",
      "env_variable": "MULTIHOME",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": ["nullable", "string", "max:64"],
      "sort": 3
    },
    {
      "name": "Max Players",
      "description": "Maximum number of players allowed on the server.",
      "env_variable": "MAX_PLAYERS",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": ["nullable", "integer", "min:1", "max:200"],
      "sort": 4
    },
    {
      "name": "Extra Arguments",
      "description": "Additional command-line arguments (advanced).",
      "env_variable": "EXTRA_ARGS",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": ["nullable", "string", "max:1024"],
      "sort": 5
    }
  ]
}
